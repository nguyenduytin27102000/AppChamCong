@model IEnumerable<TimeKeeping.Models.TimeKeepingFeedbackWithView>

@{
    ViewData["Title"] = "Index";
}

<style>
    #loader {
        position: absolute;
        left: 50%;
        top: 50%;
        z-index: 1;
        width: 120px;
        height: 120px;
        margin: -76px 0 0 -76px;
        border: 16px solid #f3f3f3;
        border-radius: 50%;
        border-top: 16px solid #3498db;
        -webkit-animation: spin 2s linear infinite;
        animation: spin 2s linear infinite;
        display: none;
    }

    @@-webkit-keyframes spin {
        0% {
            -webkit-transform: rotate(0deg);
        }

        100% {
            -webkit-transform: rotate(360deg);
        }
    }

    @@keyframes spin {
        0% {
            transform: rotate(0deg);
        }

        100% {
            transform: rotate(360deg);
        }
    }

    @@-webkit-keyframes animatebottom {
        from {
            bottom: -100px;
            opacity: 0
        }

        to {
            bottom: 0px;
            opacity: 1
        }
    }

    @@keyframes animatebottom {
        from {
            bottom: -100px;
            opacity: 0
        }

        to {
            bottom: 0;
            opacity: 1
        }
    }

    .bt {
        width: 100px;
    }
    a.disable {
        pointer-events : none;
        cursor:default;
        opacity: 0.5;
    }
    
</style>

<h1>Overview Feedback Timekeeping </h1>

<div id="loader"></div>

<table class="table table-striped table-bordered table-hover table-info text-center " id="conTent">
    <thead >
        <tr>
            <th style="width:200px" class="align-middle">
                @Html.DisplayNameFor(model => model.Time)
            </th>
            <th class="align-middle">
                @Html.DisplayNameFor(model => model.LastName)
            </th>
            <th class="align-middle">
                @Html.DisplayNameFor(model => model.Reason)
            </th>
            <th hidden>
                @Html.DisplayNameFor(model => model.CheckinId)
            </th>
            <th class="align-middle">
                @Html.DisplayNameFor(model => model.TimeOffRequestStateName)
            </th>
            <th style="width:400px" class="align-middle">
                Actions

            </th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model)
        {
            <tr>
                <td class="align-middle">
                    @Html.DisplayFor(modelItem => item.Time)
                </td>
                <td class="align-middle">
                    @Html.DisplayFor(modelItem => item.LastName)
                </td>
                <td class="align-middle">
                    @Html.DisplayFor(modelItem => item.Reason)
                </td>
                <td hidden>
                    @Html.DisplayFor(modelItem => item.CheckinId)
                </td>
                <td class="align-middle">
                    @Html.DisplayFor(modelItem => item.TimeOffRequestStateName)
                </td>
                <td class="align-middle">
                    @{
                        if (@item.TimeOffRequestStateId=="002" || @item.TimeOffRequestStateId=="003")
                        {
                            <a asp-controller="Checkins" asp-action="Edit" asp-route-id="@item.CheckinId" class="btn btn-primary bt disable" >Edit</a>
                            <a asp-controller="TimeKeepingFeedbacks" asp-action="Approval" asp-route-id="@item.CheckinId" class="btn btn-primary bt disable" onclick="loading(event)">Approve</a>
                            <a asp-controller="TimeKeepingFeedbacks" asp-action="Deny" asp-route-id="@item.CheckinId" class="btn btn-primary bt disable" onclick="loading(event)">Deny</a>
                        }
                        else
                        {
                            <a asp-controller="Checkins" asp-action="Edit" asp-route-id="@item.CheckinId" class="btn btn-primary bt">Edit</a>
                            <a asp-controller="TimeKeepingFeedbacks" asp-action="Approval" asp-route-id="@item.CheckinId" class="btn btn-primary bt" onclick="loading(event)">Approve</a>
                            <a asp-controller="TimeKeepingFeedbacks" asp-action="Deny" asp-route-id="@item.CheckinId" class="btn btn-primary bt" onclick="loading(event)">Deny</a>
                        }

                    }
                </td>
            </tr>
        }
    </tbody>
</table>

<script>
    var myVar;

    function loading(e) {

      if(confirm("Are you sure?"))
      {
      document.getElementById("loader").style.display = "block";
      document.getElementById("conTent").hidden = true;
      myVar = setTimeout(showContent, 1000);
      }
      else
      {
          e.preventDefault();
      }
    }

    function showContent() {
      document.getElementById("loader").style.display = "none";
      document.getElementById("conTent").hidden = false;
    }
</script>
